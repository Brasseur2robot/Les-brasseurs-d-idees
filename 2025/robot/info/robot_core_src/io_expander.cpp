/******************************************************************************
   Included Files
 ******************************************************************************/
#include <Arduino.h>
#include <Adafruit_AW9523.h>
#include "config.h"

/******************************************************************************
   Constants and Macros
 ******************************************************************************/
#define IO_EXPANDER_DEBUG true
#define IO_EXPANDER_UPDATE_PERIOD 0.1 /* Refresh rate of the display 1/0.1 = 10fps */

/******************************************************************************
  Types declarations
******************************************************************************/

/******************************************************************************
   Static Functions Declarations
 ******************************************************************************/

/******************************************************************************
   Global Variables Declarations
 ******************************************************************************/

/******************************************************************************
   Module Global Variables
 ******************************************************************************/
Adafruit_AW9523 aw;

/******************************************************************************
   Functions Definitions
 ******************************************************************************/
void IoExpanderInit() {
  if (!aw.begin(IO_EXPANDER_ADD)) {
    Serial.println("AW9523 not found? Check wiring!");
    while (1) delay(10);  // halt forever
  }
  Serial.println("AW9523 found!");
  
  aw.pinMode(IOX_SD_CS, OUTPUT);
}

void IoExpanderSet(int pin, bool state) {
  aw.digitalWrite(pin, state);
}
